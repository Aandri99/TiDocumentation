

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.2.2.6.3.5. Generating voltage &mdash; Red Pitaya 2.00-35 documentation</title>
      <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/page_width.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/new_style.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="4.2.2.6.3.6. Nginx requests" href="nginx.html" />
    <link rel="prev" title="4.2.2.6.3.4. Reading analog voltage from slow inputs + graph + gain and offset" href="Ravoltagesiggo.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


  <a href="https://redpitaya.com" target="_blank">



  
  <img src="../../../../../_static/redpitaya-logo.svg" class="logo" />

</a>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro.html">1. What is Red Pitaya?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickStart/quickStart.html">2. Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../appsFeatures/appsFeatures.html">3. Applications and Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../devGuideTop.html">4. Developers guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../hardware/hardware.html">4.1. Hardware</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../software.html">4.2. Software</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../console/console_con.html">4.2.1. Console connection</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../build.html">4.2.2. Build &amp; compile instructions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../C%26Python_API.html">4.2.2.1. Running C and Python Applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../comStreaming.html">4.2.2.2. Compiling and running Streaming client applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../fpga/fpga.html">4.2.2.3. Build FPGA image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ecosystem/ecosystem.html">4.2.2.4. Build Red Pitaya ecosystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../debian.html">4.2.2.5. Build Red Pitaya OS</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../webApps.html">4.2.2.6. Create your own WEB applications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../other_info/info.html">4.2.3. Other useful information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../known_sw_issues/known_sw_issues.html">4.2.4. Known software issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../customization/custom.html">5. Customization services</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Red Pitaya</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../devGuideTop.html"><span class="section-number">4. </span>Developers guide</a></li>
          <li class="breadcrumb-item"><a href="../../../software.html"><span class="section-number">4.2. </span>Software</a></li>
          <li class="breadcrumb-item"><a href="../../build.html"><span class="section-number">4.2.2. </span>Build &amp; compile instructions</a></li>
          <li class="breadcrumb-item"><a href="../webApps.html"><span class="section-number">4.2.2.6. </span>Create your own WEB applications</a></li>
          <li class="breadcrumb-item"><a href="../webExamples.html"><span class="section-number">4.2.2.6.3. </span>Examples</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.2.2.6.3.5. </span>Generating voltage</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="generating-voltage">
<h1><span class="section-number">4.2.2.6.3.5. </span>Generating voltage<a class="headerlink" href="#generating-voltage" title="Permalink to this heading"></a></h1>
<p>Take Reading analog voltage from slow inputs <a class="reference internal" href="Ravoltagesi.html#readavsi"><span class="std std-ref">example</span></a> as a basic application for this example, because it is the
simplest way to check generating voltage using one device. In this program we will set frequency, amplitude and
waveform of generating signal.</p>
<div class="section" id="web-ui">
<h2><span class="section-number">4.2.2.6.3.5.1. </span>Web UI<a class="headerlink" href="#web-ui" title="Permalink to this heading"></a></h2>
<p>In <strong>index.html</strong> there are three new blocks - <strong>frequency_setup, amplitude_setup</strong> and <strong>waveform_setup</strong>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;frequency_setup&#39;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span> <span class="nt">div</span><span class="p">&gt;</span>Frequency: Hz<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;frequency_set&#39;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;range&quot;</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">min </span><span class="o">=</span> <span class="s">&quot;1&quot;</span> <span class="na">max </span><span class="o">=</span> <span class="s">&quot;20&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;amplitude_setup&#39;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span> <span class="nt">div</span><span class="p">&gt;</span>Amplitude: V<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;amplitude_set&#39;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;range&quot;</span> <span class="na">step</span><span class="o">=</span><span class="s">&quot;0.01&quot;</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;0.5&quot;</span> <span class="na">min </span><span class="o">=</span> <span class="s">&quot;0&quot;</span> <span class="na">max </span><span class="o">=</span> <span class="s">&quot;0.5&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;waveform_setup&#39;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span> <span class="nt">div</span><span class="p">&gt;</span>Waveform<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">select</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;waveform_set&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">selected</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>Sine<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>Sawtooth<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>Square<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In <strong>app.js</strong> we added three new functions: <strong>APP.setFrequency(), APP.setAmplitude()</strong> and <strong>APP.setWaveform()</strong>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>APP.setFrequency = function() {
    APP.frequency = $(&#39;#frequency_set&#39;).val();
    var local = {};
    local[&#39;FREQUENCY&#39;] = { value: APP.frequency };
    APP.ws.send(JSON.stringify({ parameters: local }));
    $(&#39;#frequency_value&#39;).text(APP.frequency);
};

APP.setAmplitude = function() {
    APP.amplitude = $(&#39;#amplitude_set&#39;).val();
    var local = {};
    local[&#39;AMPLITUDE&#39;] = { value: APP.amplitude };
    APP.ws.send(JSON.stringify({ parameters: local }));
    $(&#39;#amplitude_value&#39;).text(APP.amplitude);
};

APP.setWaveform = function() {
    APP.waveform = $(&#39;#waveform_set&#39;).val();
    console.log(&#39;Set to &#39; + APP.waveform);
    var local = {};
    local[&#39;WAVEFORM&#39;] = { value: APP.waveform };
    APP.ws.send(JSON.stringify({ parameters: local }));
};
</pre></div>
</div>
<div class="section" id="controller">
<h3><span class="section-number">4.2.2.6.3.5.1.1. </span>Controller<a class="headerlink" href="#controller" title="Permalink to this heading"></a></h3>
<p>In <strong>main.cpp</strong> (controller) we added three 3 parameters:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">CIntParameter</span><span class="w"> </span><span class="n">FREQUENCY</span><span class="p">(</span><span class="s">&quot;FREQUENCY&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CBaseParameter</span><span class="o">::</span><span class="n">RW</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">);</span>
<span class="n">CFloatParameter</span><span class="w"> </span><span class="n">AMPLITUDE</span><span class="p">(</span><span class="s">&quot;AMPLITUDE&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CBaseParameter</span><span class="o">::</span><span class="n">RW</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span>
<span class="n">CIntParameter</span><span class="w"> </span><span class="n">WAVEFORM</span><span class="p">(</span><span class="s">&quot;WAVEFORM&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CBaseParameter</span><span class="o">::</span><span class="n">RW</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
<p>Minimum frequency is 1Hz and maximum - 20Hz. Minimum amplitude is 0 and maximum is 0.5, because our program can read
voltage from slow inputs in range 0-3,3V and generator’s range is -1V +1V. We should set offset +0.5V and limit
amplitude’s maximum to 0.5V to get a signal in range 0V-1V(-0.5V + 0.5V is a range of generating signal and +0.5V
offset).</p>
<p>In our program waveform can be:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>value</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Sine</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sawtooth</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Square</p></td>
</tr>
</tbody>
</table>
<p>There is a new function - <strong>set_generator_config()</strong>. In this function we configurate output signal. This api function
sets frequency of our signal. Signal will be gererated on output channel 1(<strong>RP_CH_1</strong>).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rp_GenFreq</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">FREQUENCY</span><span class="p">.</span><span class="n">Value</span><span class="p">());</span>
</pre></div>
</div>
<p>We need to set offset <strong>0.5V</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rp_GenOffset</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span>
</pre></div>
</div>
<p>Setting amplitude:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rp_GenAmp</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">AMPLITUDE</span><span class="p">.</span><span class="n">Value</span><span class="p">());</span>
</pre></div>
</div>
<p>And setting waveform:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">WAVEFORM</span><span class="p">.</span><span class="n">Value</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">rp_GenWaveform</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">RP_WAVEFORM_SINE</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">WAVEFORM</span><span class="p">.</span><span class="n">Value</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">rp_GenWaveform</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">RP_WAVEFORM_RAMP_UP</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">WAVEFORM</span><span class="p">.</span><span class="n">Value</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">rp_GenWaveform</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">RP_WAVEFORM_SQUARE</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There can be other waveforms: <strong>RP_WAVEFORM_TRIANGLE</strong> (triangle), <strong>RP_WAVEFORM_RAMP_DOWN</strong> (reversed sawtooth),
<strong>RP_WAVEFORM_DC</strong> (dc), <strong>RP_WAVEFORM_PWM</strong> (pwm), <strong>RP_WAVEFORM_ARBITRARY</strong> (defined wave form).</p>
<p>In <strong>rp_app_init()</strong> we should set up signal and turn it on:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">set_generator_config</span><span class="p">();</span>
<span class="n">rp_GenOutEnable</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">);</span>
<span class="n">rp_GenResetTrigger</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">);</span>
</pre></div>
</div>
<p>In <strong>rp_app_exit()</strong> disable signal:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rp_GenOutDisable</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">);</span>
</pre></div>
</div>
<p>And in OnNewParams() update parameters:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FREQUENCY</span><span class="p">.</span><span class="n">Update</span><span class="p">();</span>
<span class="n">AMPLITUDE</span><span class="p">.</span><span class="n">Update</span><span class="p">();</span>
<span class="n">WAVEFORM</span><span class="p">.</span><span class="n">Update</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Ravoltagesiggo.html" class="btn btn-neutral float-left" title="4.2.2.6.3.4. Reading analog voltage from slow inputs + graph + gain and offset" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nginx.html" class="btn btn-neutral float-right" title="4.2.2.6.3.6. Nginx requests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Red Pitaya d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>