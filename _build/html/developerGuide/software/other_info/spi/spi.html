

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.2.3.3. SPI interface &mdash; Red Pitaya 2.00-35 documentation</title>
      <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/page_width.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/new_style.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.2.3.4. Interfacing SPI TFT displays with touch" href="../tft/TFT.html" />
    <link rel="prev" title="4.2.3.2. General purpose input output" href="../gpio/gpio.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


  <a href="https://redpitaya.com" target="_blank">



  
  <img src="../../../../_static/redpitaya-logo.svg" class="logo" />

</a>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../intro.html">1. What is Red Pitaya?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quickStart/quickStart.html">2. Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../appsFeatures/appsFeatures.html">3. Applications and Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../devGuideTop.html">4. Developers guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/hardware.html">4.1. Hardware</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../software.html">4.2. Software</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../console/console_con.html">4.2.1. Console connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../build/build.html">4.2.2. Build &amp; compile instructions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../info.html">4.2.3. Other useful information</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../os/network.html">4.2.3.1. Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gpio/gpio.html">4.2.3.2. General purpose input output</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.2.3.3. SPI interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tft/TFT.html">4.2.3.4. Interfacing SPI TFT displays with touch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../remote_software/remote_sw_deploy.html">4.2.3.5. Remote software deployment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../known_sw_issues/known_sw_issues.html">4.2.4. Known software issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../customization/custom.html">5. Customization services</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Red Pitaya</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../devGuideTop.html"><span class="section-number">4. </span>Developers guide</a></li>
          <li class="breadcrumb-item"><a href="../../software.html"><span class="section-number">4.2. </span>Software</a></li>
          <li class="breadcrumb-item"><a href="../info.html"><span class="section-number">4.2.3. </span>Other useful information</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.2.3.3. </span>SPI interface</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="spi-interface">
<h1><span class="section-number">4.2.3.3. </span>SPI interface<a class="headerlink" href="#spi-interface" title="Permalink to this heading"></a></h1>
<p>SPI interface support for the <a class="reference internal" href="../../../hardware/125-14/extent.html#e2"><span class="std std-ref">E2</span></a> connector without the need for a specific FPGA code.</p>
<p>By default, on all RedPitaya boards, the CS state of the SPI is set to HIGH (inactive).</p>
<p>If you want to set the default value to LOW (inactive), then you need to rebuild the device tree. This can be done on the Red Pitaya itself.
First, you need to open the file using a command in the console with a description of the device tree.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">root@rp-f01c3d:~# </span>rw
<span class="gp">root@rp-f01c3d:~# </span>nano<span class="w"> </span>/opt/redpitaya/dts/<span class="k">$(</span>monitor<span class="w"> </span>-f<span class="k">)</span>/dtraw.dts
</pre></div>
</div>
<p>In the file, you need to find the SPI device: spidev&#64;0
and add the line <em>spi-cs-high</em> to this device;</p>
<div class="figure align-center" id="id1">
<img alt="../../../../_images/spi_dts.png" src="../../../../_images/spi_dts.png" />
<p class="caption"><span class="caption-text">Example of SPI config</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</div>
<p>After that, you need to rebuild the tree and restart the board</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">root@rp-f01c3d:~# </span><span class="nb">cd</span><span class="w"> </span>/opt/redpitaya/dts/<span class="k">$(</span>monitor<span class="w"> </span>-f<span class="k">)</span>/
<span class="gp">root@rp-f01c3d:~# </span>dtc<span class="w"> </span>-I<span class="w"> </span>dts<span class="w"> </span>-O<span class="w"> </span>dtb<span class="w"> </span>./dtraw.dts<span class="w"> </span>-o<span class="w"> </span>devicetree.dtb
<span class="gp">root@rp-f01c3d:~# </span>reboot
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The settings are applied only after the device tree is loaded. When the board starts up, the CS value is in the HIGH state but will change to LOW after the boot is complete.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also switch the driver mode through the settings. See commands from <a class="reference internal" href="../../../../appsFeatures/remoteControl/command_list.html#command-list"><span class="std std-ref">hw api</span></a>:</p>
<ul class="simple">
<li><p>rp_SPI_GetCSMode</p></li>
<li><p>rp_SPI_SetCSMode</p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../gpio/gpio.html" class="btn btn-neutral float-left" title="4.2.3.2. General purpose input output" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tft/TFT.html" class="btn btn-neutral float-right" title="4.2.3.4. Interfacing SPI TFT displays with touch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Red Pitaya d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>