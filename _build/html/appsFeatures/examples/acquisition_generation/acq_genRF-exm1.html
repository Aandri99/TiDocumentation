

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.4.6.5.1. Synchronised one-pulse signal generation and acquisition &mdash; Red Pitaya 2.00-35 documentation</title>
      <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/page_width.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/new_style.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.4.6.5.2. Generating a signal and checking its shape" href="acq_genRF-exm2.html" />
    <link rel="prev" title="3.4.6.5. Generating and Acquiring signals at RF inputs/outputs" href="acq_genRF.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


  <a href="https://redpitaya.com" target="_blank">



  
  <img src="../../../_static/redpitaya-logo.svg" class="logo" />

</a>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">1. What is Red Pitaya?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickStart/quickStart.html">2. Quick start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../appsFeatures.html">3. Applications and Features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introAcqGen.html">3.1. Introduction to data acquisition and generation with Red Pitaya</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applications/apps-featured.html">3.2. Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../systemtool/systool.html">3.3. System tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../remoteControl/remoteAndProg.html">3.4. Programming and remote-control tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../remoteControl/scpi.html">3.4.1. SCPI server (MATLAB, LabVIEW, Scilab or Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../remoteControl/API_scripts.html">3.4.2. C and Python Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../remoteControl/jupyter/Jupyter.html">3.4.3. Jupyter Lab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../remoteControl/deepMemoryAcquisition.html">3.4.4. Deep Memory Acquisition (DMA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../remoteControl/command_list.html">3.4.5. List of supported SCPI &amp; API commands</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../remoteControl/examples_top.html">3.4.6. Examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../digital/digital.html">3.4.6.1. Digital</a></li>
<li class="toctree-l4"><a class="reference internal" href="../analog/analog.html">3.4.6.2. Analog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../generation/genRF.html">3.4.6.3. Generating signals at RF outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../acquisition/acqRF.html">3.4.6.4. Acquiring signals at RF inputs</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="acq_genRF.html">3.4.6.5. Generating and Acquiring signals at RF inputs/outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multiboard_sync/multiboard.html">3.4.6.6. Multi-board signal acquisition and generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../DMA/deepMemoryAcq.html">3.4.6.7. Deep Memory Acquisition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../communication_interfaces/digcomIF.html">3.4.6.8. Digital communication interfaces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../remoteControl/knownIssues.html">3.4.7. Known SCPI &amp; API issues and changes by OS version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../command_line_tools/com_line_tool.html">3.5. Command-line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../supportedFeaturesAndApps.html">3.6. Supported features and apps by Red Pitaya model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/devGuideTop.html">4. Developers guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../customization/custom.html">5. Customization services</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Red Pitaya</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../appsFeatures.html"><span class="section-number">3. </span>Applications and Features</a></li>
          <li class="breadcrumb-item"><a href="../../remoteControl/remoteAndProg.html"><span class="section-number">3.4. </span>Programming and remote-control tools</a></li>
          <li class="breadcrumb-item"><a href="../../remoteControl/examples_top.html"><span class="section-number">3.4.6. </span>Examples</a></li>
          <li class="breadcrumb-item"><a href="acq_genRF.html"><span class="section-number">3.4.6.5. </span>Generating and Acquiring signals at RF inputs/outputs</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.4.6.5.1. </span>Synchronised one-pulse signal generation and acquisition</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="synchronised-one-pulse-signal-generation-and-acquisition">
<h1><span class="section-number">3.4.6.5.1. </span>Synchronised one-pulse signal generation and acquisition<a class="headerlink" href="#synchronised-one-pulse-signal-generation-and-acquisition" title="Permalink to this heading"></a></h1>
<div class="section" id="description">
<h2><span class="section-number">3.4.6.5.1.1. </span>Description<a class="headerlink" href="#description" title="Permalink to this heading"></a></h2>
<p>This example shows how to acquire 16k samples of signal on fast analog inputs. The signal will be acquired simultaneously with the generated signal. The time length of the acquired signal depends on the time scale of a buffer that can be set with a decimation factor. The decimations and time scales of a buffer are given in the <a class="reference internal" href="../acquisition/acqRF-samp-and-dec.html#s-rate-and-dec"><span class="std std-ref">sample rate and decimation</span></a>. Voltage and frequency ranges depend on the Red Pitaya model.</p>
</div>
<div class="section" id="required-hardware">
<h2><span class="section-number">3.4.6.5.1.2. </span>Required hardware<a class="headerlink" href="#required-hardware" title="Permalink to this heading"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Red Pitaya device</p></li>
</ul>
</div></blockquote>
<p>Wiring example for STEMlab 125-14 &amp; STEMlab 125-10:</p>
<div class="figure align-default">
<img alt="../../../_images/generate_continous_signal_on_fast_analog_output.png" src="../../../_images/generate_continous_signal_on_fast_analog_output.png" />
</div>
</div>
<div class="section" id="circuit">
<h2><span class="section-number">3.4.6.5.1.3. </span>Circuit<a class="headerlink" href="#circuit" title="Permalink to this heading"></a></h2>
<div class="figure align-default">
<img alt="../../../_images/generate_continous_signal_on_fast_analog_output_circuit1.png" src="../../../_images/generate_continous_signal_on_fast_analog_output_circuit1.png" />
</div>
</div>
<div class="section" id="scpi-code-examples">
<h2><span class="section-number">3.4.6.5.1.4. </span>SCPI Code Examples<a class="headerlink" href="#scpi-code-examples" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This code is written for <strong>2.00-23 or higher OS</strong>. For older OS versions, please check when specific commands were released (a note is added to each command introduced in 2.00 or higher verisons).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With the latest OS versions you can use <code class="docutils literal notranslate"><span class="pre">ACQ:DEC:F</span> <span class="pre">&lt;decimation_factor&gt;</span></code> command for more precise control over the acquisition. The decimation factor can be any of <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">8,</span> <span class="pre">16,</span> <span class="pre">17,</span> <span class="pre">18,</span> <span class="pre">19,</span> <span class="pre">...,</span> <span class="pre">65535,</span> <span class="pre">65536]</span></code>.</p>
</div>
<div class="section" id="code-matlab">
<h3><span class="section-number">3.4.6.5.1.4.1. </span>Code - MATLAB®<a class="headerlink" href="#code-matlab" title="Permalink to this heading"></a></h3>
<p>The code is written in MATLAB. In the code, we use SCPI commands and TCP client communication. Copy the code from below into the MATLAB editor, save the project, and hit the “Run” button.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">clc</span>
<span class="nb">clear</span><span class="w"> </span><span class="nb">all</span>
<span class="nb">close</span><span class="w"> </span><span class="nb">all</span>

<span class="n">IP</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;192.168.178.111&#39;</span><span class="p">;</span><span class="w">           </span><span class="c">% Input IP of your Red Pitaya...</span>
<span class="n">port</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5000</span><span class="p">;</span>
<span class="n">RP</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">tcpclient</span><span class="p">(</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">port</span><span class="p">);</span>

<span class="c">%% Open connection with your Red Pitaya</span>
<span class="n">RP</span><span class="p">.</span><span class="n">ByteOrder</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;big-endian&quot;</span><span class="p">;</span>
<span class="nb">configureTerminator</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&quot;CR/LF&quot;</span><span class="p">);</span>

<span class="nb">flush</span><span class="p">(</span><span class="n">RP</span><span class="p">);</span>

<span class="c">% Reset Generation and Acquisition</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;GEN:RST&#39;</span><span class="p">);</span><span class="w">                        </span><span class="c">% Reset Generator &amp; Acquisition</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:RST&#39;</span><span class="p">);</span>

<span class="c">%% GENERATION</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;SOUR1:FUNC SINE&#39;</span><span class="p">);</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;SOUR1:FREQ:FIX 1000000&#39;</span><span class="p">);</span><span class="w">         </span><span class="c">% Set frequency of output signal</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;SOUR1:VOLT 1&#39;</span><span class="p">);</span><span class="w">                   </span><span class="c">% Set amplitude of output signal</span>

<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;SOUR1:BURS:STAT BURST&#39;</span><span class="p">);</span><span class="w">      </span><span class="c">% Set burst mode to BURST</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;SOUR1:BURS:NCYC 3&#39;</span><span class="p">);</span><span class="w">          </span><span class="c">% Set 3 pulses of sine wave</span>

<span class="c">%% ACQUISITION</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:DEC 1&#39;</span><span class="p">);</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:TRig:LEV 0&#39;</span><span class="p">);</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:TRig:DLY 0&#39;</span><span class="p">);</span>


<span class="c">%% Start gen % acq</span>

<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:START&#39;</span><span class="p">);</span>
<span class="nb">pause</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:TRig AWG_PE&#39;</span><span class="p">);</span>
<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;OUTPUT1:STATE ON&#39;</span><span class="p">);</span><span class="w">           </span><span class="c">% Set output to ON</span>
<span class="nb">pause</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="nb">writeline</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;SOUR1:TRig:INT&#39;</span><span class="p">);</span>

<span class="c">%% Wait for trigger</span>
<span class="k">while</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">trig_rsp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">writeread</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:TRig:STAT?&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">strcmp</span><span class="p">(</span><span class="s">&#39;TD&#39;</span><span class="p">,</span><span class="n">trig_rsp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">))</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="c">%%! OS 2.00 or higher only !%%</span>
<span class="c">% wait for fill adc buffer</span>
<span class="k">while</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">fill_state</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">writeread</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:TRig:FILL?&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">strcmp</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">fill_state</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">))</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="c">%% Read &amp; plot</span>

<span class="n">signal_str</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">writeread</span><span class="p">(</span><span class="n">RP</span><span class="p">,</span><span class="s">&#39;ACQ:SOUR1:DATA?&#39;</span><span class="p">);</span>
<span class="n">signal_num</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">str2num</span><span class="p">(</span><span class="n">signal_str</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="nb">length</span><span class="p">(</span><span class="n">signal_str</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">signal_num</span><span class="p">)</span>
<span class="nb">grid</span><span class="w"> </span><span class="n">on</span>

<span class="c">%% Close connection with Red Pitaya</span>
<span class="nb">clear</span><span class="w"> </span><span class="n">RP</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="code-python">
<h3><span class="section-number">3.4.6.5.1.4.2. </span>Code - Python<a class="headerlink" href="#code-python" title="Permalink to this heading"></a></h3>
<p><strong>Using just SCPI commands:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">redpitaya_scpi</span> <span class="k">as</span> <span class="nn">scpi</span>

<span class="n">IP</span> <span class="o">=</span> <span class="s1">&#39;192.168.178.111&#39;</span>        <span class="c1"># &#39;rp-f066c8.local&#39;</span>
<span class="n">rp_s</span> <span class="o">=</span> <span class="n">scpi</span><span class="o">.</span><span class="n">scpi</span><span class="p">(</span><span class="n">IP</span><span class="p">)</span>

<span class="n">wave_form</span> <span class="o">=</span> <span class="s1">&#39;sine&#39;</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">ampl</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Reset Generation and Acquisition</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;GEN:RST&#39;</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:RST&#39;</span><span class="p">)</span>

<span class="c1">##### Generation #####</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:FUNC &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">wave_form</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:FREQ:FIX &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">freq</span><span class="p">))</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ampl</span><span class="p">))</span>

<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:BURS:STAT BURST&#39;</span><span class="p">)</span>        <span class="c1"># Mode set to BURST</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:BURS:NCYC 3&#39;</span><span class="p">)</span>            <span class="c1"># 3 periods in each burst</span>

<span class="c1">##### Acqusition #####</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:DEC 1&#39;</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig:LEV 0&#39;</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig:DLY 0&#39;</span><span class="p">)</span>

<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:START&#39;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig AWG_PE&#39;</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;OUTPUT1:STATE ON&#39;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:TRig:INT&#39;</span><span class="p">)</span>

<span class="c1"># Wait for trigger</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig:STAT?&#39;</span><span class="p">)</span>           <span class="c1"># Get Trigger Status</span>
    <span class="k">if</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TD&#39;</span><span class="p">:</span>               <span class="c1"># Triggerd?</span>
        <span class="k">break</span>

<span class="c1">## ! OS 2.00 or higher only ! ##</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig:FILL?&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
        <span class="k">break</span>

<span class="c1"># Read data and plot</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:SOUR1:DATA?&#39;</span><span class="p">)</span>              <span class="c1"># Read full buffer (source 1)</span>
<span class="n">data_string</span> <span class="o">=</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span>                 <span class="c1"># data into a string</span>

<span class="c1"># Remove brackets and empty spaces + string =&gt; float</span>
<span class="n">data_string</span> <span class="o">=</span> <span class="n">data_string</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n\r</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">data_string</span><span class="p">))</span>        <span class="c1"># transform data into float</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Using functions:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">redpitaya_scpi</span> <span class="k">as</span> <span class="nn">scpi</span>

<span class="n">IP</span> <span class="o">=</span> <span class="s1">&#39;192.168.178.111&#39;</span>        <span class="c1"># &#39;rp-f066c8.local&#39;</span>
<span class="n">rp_s</span> <span class="o">=</span> <span class="n">scpi</span><span class="o">.</span><span class="n">scpi</span><span class="p">(</span><span class="n">IP</span><span class="p">)</span>

<span class="n">wave_form</span> <span class="o">=</span> <span class="s1">&#39;sine&#39;</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">ampl</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Reset Generation and Acquisition</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;GEN:RST&#39;</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:RST&#39;</span><span class="p">)</span>

<span class="c1">##### Generation #####</span>
<span class="c1"># Function for configuring Source</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">sour_set</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">wave_form</span><span class="p">,</span> <span class="n">ampl</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">burst</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ncyc</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="c1">##### Acqusition #####</span>
<span class="c1"># Function for configuring Acquisition</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">acq_set</span><span class="p">(</span><span class="n">dec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">trig_lvl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">trig_delay</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:START&#39;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig AWG_PE&#39;</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;OUTPUT1:STATE ON&#39;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:TRig:INT&#39;</span><span class="p">)</span>

<span class="c1"># Wait for trigger</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig:STAT?&#39;</span><span class="p">)</span>           <span class="c1"># Get Trigger Status</span>
    <span class="k">if</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TD&#39;</span><span class="p">:</span>               <span class="c1"># Triggerd?</span>
        <span class="k">break</span>

<span class="c1">## ! OS 2.00 or higher only ! ##</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRig:FILL?&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
        <span class="k">break</span>

<span class="c1"># Read data and plot</span>
<span class="c1"># function for Data Acquisition</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">acq_data</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">convert</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Python functions are accessible with the latest version of the <a href="https://github.com/RedPitaya/RedPitaya/blob/master/Examples/python/redpitaya_scpi.py" target="_blank">redpitaya_scpi.py</a> document available on our GitHub.
The functions represent a quality-of-life improvement as they combine the SCPI commands in an optimal order and also check for improper user inputs. The code should function at approximately the same speed without them.</p>
<p>For further information on functions please consult the <a href="https://github.com/RedPitaya/RedPitaya/blob/master/Examples/python/redpitaya_scpi.py" target="_blank">redpitaya_scpi.py</a> code.</p>
</div>
</div>
<div class="section" id="code-labview">
<h3><span class="section-number">3.4.6.5.1.4.3. </span>Code - LabVIEW<a class="headerlink" href="#code-labview" title="Permalink to this heading"></a></h3>
<div class="figure align-default">
<img alt="../../../_images/Synchronised-one-pulse-signal-generation-and-acquisition_LV.png" src="../../../_images/Synchronised-one-pulse-signal-generation-and-acquisition_LV.png" />
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://downloads.redpitaya.com/downloads/Clients/labview/Synchronised%20one%20pulse%20signal%20generation%20and%20acquisition.vi">Download Example</a></p></li>
</ul>
</div>
</div>
<div class="section" id="api-code-examples">
<h2><span class="section-number">3.4.6.5.1.5. </span>API Code Examples<a class="headerlink" href="#api-code-examples" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The API code examples don’t require the use of the SCPI server. Instead, the code should be compiled and executed on the Red Pitaya itself (inside Linux OS).
Instructions on how to compile the code and other useful information are <a class="reference internal" href="../../../developerGuide/software/build/C%26Python_API.html#comc"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="code-c-api">
<h3><span class="section-number">3.4.6.5.1.5.1. </span>Code - C API<a class="headerlink" href="#code-c-api" title="Permalink to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Red Pitaya C API example of Synced Generation and acquisition</span>
<span class="cm">on a specific channel */</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rp.h&quot;</span>



<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">){</span>

<span class="w">    </span><span class="cm">/* Print error, if rp_Init() function failed */</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">rp_Init</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">RP_OK</span><span class="p">){</span>
<span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Rp api init failed!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* Reset Generation and Acquisition */</span>
<span class="w">    </span><span class="n">rp_GenReset</span><span class="p">();</span>
<span class="w">    </span><span class="n">rp_AcqReset</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/* Generation */</span>
<span class="w">    </span><span class="n">rp_GenFreq</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mf">1000000.0</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_GenAmp</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_GenWaveform</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">RP_WAVEFORM_SINE</span><span class="p">);</span>

<span class="w">    </span><span class="n">rp_GenMode</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">RP_GEN_MODE_BURST</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_GenBurstCount</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w">          </span><span class="c1">// Ncyc</span>
<span class="w">    </span><span class="n">rp_GenBurstRepetitions</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">    </span><span class="c1">// Nor</span>
<span class="w">    </span><span class="n">rp_GenBurstPeriod</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w">        </span><span class="c1">// Period</span>

<span class="w">    </span><span class="n">rp_GenOutEnable</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Acquisition */</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">buff_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16384</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">buff_size</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">));</span>

<span class="w">    </span><span class="n">rp_AcqReset</span><span class="p">();</span>
<span class="w">    </span><span class="n">rp_AcqSetDecimation</span><span class="p">(</span><span class="n">RP_DEC_1</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_AcqSetTriggerLevel</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span><span class="w">    </span><span class="c1">// Trig level is set in Volts while in SCPI</span>
<span class="w">    </span><span class="n">rp_AcqSetTriggerDelay</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// There is an option to select coupling when using SIGNALlab 250-12</span>
<span class="w">    </span><span class="c1">// rp_AcqSetAC_DC(RP_CH_1, RP_AC);      // enables AC coupling on Channel 1</span>

<span class="w">    </span><span class="c1">// By default LV level gain is selected</span>
<span class="w">    </span><span class="n">rp_AcqSetGain</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="n">RP_LOW</span><span class="p">);</span><span class="w">         </span><span class="c1">// user can switch gain using this command</span>

<span class="w">    </span><span class="n">rp_AcqStart</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/* After the acquisition is started some time delay is needed to acquire fresh samples into buffer</span>
<span class="cm">    Here we have used a time delay of one second but you can calculate the exact value taking into account buffer</span>
<span class="cm">    length and sampling rate*/</span>

<span class="w">    </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_AcqSetTriggerSrc</span><span class="p">(</span><span class="n">RP_TRIG_SRC_AWG_PE</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_acq_trig_state_t</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RP_TRIG_STATE_TRIGGERED</span><span class="p">;</span>

<span class="w">    </span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_GenTriggerOnly</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">);</span><span class="w">         </span><span class="c1">// Trigger generator</span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
<span class="w">        </span><span class="n">rp_AcqGetTriggerState</span><span class="p">(</span><span class="o">&amp;</span><span class="n">state</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RP_TRIG_STATE_TRIGGERED</span><span class="p">){</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// !! OS 2.00 or higher only !! //</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">fillState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">fillState</span><span class="p">){</span>
<span class="w">        </span><span class="n">rp_AcqGetBufferFillState</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fillState</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">rp_AcqGetOldestDataV</span><span class="p">(</span><span class="n">RP_CH_1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">buff_size</span><span class="p">,</span><span class="w"> </span><span class="n">buff</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">buff_size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buff</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* Releasing resources */</span>
<span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
<span class="w">    </span><span class="n">rp_Release</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="code-python-api">
<h3><span class="section-number">3.4.6.5.1.5.2. </span>Code - Python API<a class="headerlink" href="#code-python-api" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python3</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">rp</span>


<span class="c1">#? Possible waveforms:</span>
<span class="c1">#?   RP_WAVEFORM_SINE, RP_WAVEFORM_SQUARE, RP_WAVEFORM_TRIANGLE, RP_WAVEFORM_RAMP_UP,</span>
<span class="c1">#?   RP_WAVEFORM_RAMP_DOWN, RP_WAVEFORM_DC, RP_WAVEFORM_PWM, RP_WAVEFORM_ARBITRARY,</span>
<span class="c1">#?   RP_WAVEFORM_DC_NEG, RP_WAVEFORM_SWEEP</span>

<span class="n">channel</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_CH_1</span>        <span class="c1"># rp.RP_CH_2</span>
<span class="n">waveform</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_WAVEFORM_SINE</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">100000</span>
<span class="n">ampl</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="n">ncyc</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">nor</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">period</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">trig_lvl</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">trig_dly</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">#? Possible decimations:</span>
<span class="c1">#?  RP_DEC_1, RP_DEC_2, RP_DEC_4, RP_DEC_8, RP_DEC_16, RP_DEC_32, RP_DEC_64,</span>
<span class="c1">#?  RP_DEC_128, RP_DEC_256, RP_DEC_512, RP_DEC_1024, RP_DEC_2048, RP_DEC_4096, RP_DEC_8192,</span>
<span class="c1">#?  RP_DEC_16384, RP_DEC_32768, RP_DEC_65536</span>

<span class="n">dec</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_DEC_1</span>

<span class="c1">#? Possible generation trigger sources:</span>
<span class="c1">#?  RP_GEN_TRIG_SRC_INTERNAL, RP_GEN_TRIG_SRC_EXT_PE, RP_GEN_TRIG_SRC_EXT_NE</span>

<span class="n">gen_trig_sour</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_GEN_TRIG_SRC_INTERNAL</span>

<span class="c1">#? Possible acquisition trigger sources:</span>
<span class="c1">#?  RP_TRIG_SRC_DISABLED, RP_TRIG_SRC_NOW, RP_TRIG_SRC_CHA_PE, RP_TRIG_SRC_CHA_NE, RP_TRIG_SRC_CHB_PE,</span>
<span class="c1">#?  RP_TRIG_SRC_CHB_NE, RP_TRIG_SRC_EXT_PE, RP_TRIG_SRC_EXT_NE, RP_TRIG_SRC_AWG_PE, RP_TRIG_SRC_AWG_NE,</span>
<span class="c1">#?  RP_TRIG_SRC_CHC_PE, RP_TRIG_SRC_CHC_NE, RP_TRIG_SRC_CHD_PE, RP_TRIG_SRC_CHD_NE</span>

<span class="n">acq_trig_sour</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_TRIG_SRC_AWG_PE</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">16384</span>



<span class="c1"># Initialize the interface</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_Init</span><span class="p">()</span>

<span class="c1"># Reset Generation and Acquisition</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenReset</span><span class="p">()</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqReset</span><span class="p">()</span>

<span class="c1">###### Generation #####</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Gen_start&quot;</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenWaveform</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">waveform</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenFreqDirect</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">freq</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenAmp</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">ampl</span><span class="p">)</span>

<span class="c1"># Change to burst mode</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenMode</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_GEN_MODE_BURST</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenBurstCount</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">ncyc</span><span class="p">)</span>                  <span class="c1"># Ncyc</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenBurstRepetitions</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">nor</span><span class="p">)</span>             <span class="c1"># Nor</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenBurstPeriod</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>               <span class="c1"># Period</span>


<span class="c1"># Specify generator trigger source</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenTriggerSource</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">gen_trig_sour</span><span class="p">)</span>

<span class="c1"># Enable output synchronisation</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenOutEnableSync</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenOutEnable</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>


<span class="c1">##### Acquisition #####</span>
<span class="c1"># Set Decimation</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqSetDecimation</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>

<span class="c1">#? Possible triggers:</span>
<span class="c1">#?  RP_T_CH_1, RP_T_CH_2, RP_T_CH_3, RP_T_CH_4, RP_T_CH_EXT</span>

<span class="c1"># Set trigger level and delay</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqSetTriggerLevel</span><span class="p">(</span><span class="n">rp</span><span class="o">.</span><span class="n">RP_T_CH_1</span><span class="p">,</span> <span class="n">trig_lvl</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqSetTriggerDelay</span><span class="p">(</span><span class="n">trig_dly</span><span class="p">)</span>


<span class="c1"># Start Acquisition</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Acq_start&quot;</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqStart</span><span class="p">()</span>

<span class="c1"># Specify trigger - input 1 positive edge</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqSetTriggerSrc</span><span class="p">(</span><span class="n">acq_trig_sour</span><span class="p">)</span>


<span class="n">rp</span><span class="o">.</span><span class="n">rp_GenTriggerOnly</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>       <span class="c1"># Trigger generator</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trigger state: </span><span class="si">{</span><span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqGetTriggerState</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Trigger state</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">trig_state</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqGetTriggerState</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">trig_state</span> <span class="o">==</span> <span class="n">rp</span><span class="o">.</span><span class="n">RP_TRIG_STATE_TRIGGERED</span><span class="p">:</span>
        <span class="k">break</span>

<span class="c1">## ! OS 2.00 or higher only ! ##</span>
<span class="c1"># Fill state</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fill state: </span><span class="si">{</span><span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqGetBufferFillState</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1">## ! OS 2.00 or higher only ! ##</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqGetBufferFillState</span><span class="p">()[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">break</span>


<span class="c1">### Get data ###</span>
<span class="c1"># Volts</span>
<span class="n">fbuff</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">fBuffer</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">rp_AcqGetDataV</span><span class="p">(</span><span class="n">rp</span><span class="o">.</span><span class="n">RP_CH_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">fbuff</span><span class="p">)</span>

<span class="n">data_V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">data_V</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fbuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data in Volts: </span><span class="si">{</span><span class="n">data_V</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Release resources</span>
<span class="n">rp</span><span class="o">.</span><span class="n">rp_Release</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="acq_genRF.html" class="btn btn-neutral float-left" title="3.4.6.5. Generating and Acquiring signals at RF inputs/outputs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="acq_genRF-exm2.html" class="btn btn-neutral float-right" title="3.4.6.5.2. Generating a signal and checking its shape" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Red Pitaya d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>